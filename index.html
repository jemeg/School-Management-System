<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>نظام إدارة المدرسة - إدارة القبول والرسوم</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <!-- Header Section -->
        <header class="header">
            <div class="logo">
                <i class="fas fa-school"></i>
                <h1>نظام إدارة المدرسة</h1>
            </div>
            <div class="date" id="currentDate"></div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Statistics Cards -->
            <section class="stats-cards">
                <div class="stat-card total-students">
                    <i class="fas fa-users"></i>
                    <div class="info">
                        <h3>إجمالي الطلبة</h3>
                        <p id="totalStudents">0</p>
                    </div>
                </div>
                <div class="stat-card paid">
                    <i class="fas fa-check-circle"></i>
                    <div class="info">
                        <h3>الطلبة دفعو كامل </h3>
                        <p id="paidStudents">0</p>
                    </div>
                </div>
                <div class="stat-card partial">
                    <i class="fas fa-clock"></i>
                    <div class="info">
                        <h3>الطلبة دفعو جزئي</h3>
                        <p id="partialStudents">0</p>
                    </div>
                </div>
                <div class="stat-card unpaid">
                    <i class="fas fa-exclamation-circle"></i>
                    <div class="info">
                        <h3>الطلبة لم يدفعو</h3>
                        <p id="unpaidStudents">0</p>
                    </div>
                </div>
            </section>

            <!-- Student Form -->
            <section class="student-form">
                <h2><i class="fas fa-user-plus"></i> إضافة طالب جديد</h2>
                <form id="studentForm">
                    <div class="form-group">
                        <label for="fullName">الاسم الكامل</label>
                        <input type="text" id="fullName" required>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="grade">الصف الدراسي</label>
                            <select id="grade" required>
                                <option value="">اختر الصف</option>
                                <option value="الأول ابتدائي">الأول ابتدائي</option>
                                <option value="الثاني ابتدائي">الثاني ابتدائي</option>
                                <option value="الثالث ابتدائي">الثالث ابتدائي</option>
                                <option value="الرابع ابتدائي">الرابع ابتدائي</option>
                                <option value="الخامس ابتدائي">الخامس ابتدائي</option>
                                <option value="السادس ابتدائي">السادس ابتدائي</option>
                                <option value="الأول متوسط">الأول متوسط</option>
                                <option value="الثاني متوسط">الثاني متوسط</option>
                                <option value="الثالث متوسط">الثالث متوسط</option>
                                <option value="الأول ثانوي">الأول ثانوي</option>
                                <option value="الثاني ثانوي">الثاني ثانوي</option>
                                <option value="الثالث ثانوي">الثالث ثانوي</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="registrationDate">تاريخ التسجيل</label>
                            <input type="date" id="registrationDate" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <h3><i class="fas fa-mony-plus"></i> عدد شهور الدفع </h3>
                            <!-- From Uiverse.io by 3bdel3ziz-T --> 
                            <div class="select">
                              <div
                                class="selected"
                                data-default="شهور الدفع"
                                data-one="شهر 1"
                                data-two="شهرين 2"
                                data-three="3 شهور"
                                data-four="4 شهور"
                                data-five="شهور 5"
                                data-six="شهور 6"
                                data-seven="شهور 7"
                                data-eight="شهور 8"
                                data-nine="شهور 9"
                                data-ten="شهور 10"
                                data-Eleven="شهور 11"
                                data-Twelve="شهور 12"
                              >
                                <svg
                                  xmlns="http://www.w3.org/2000/svg"
                                  height="1em"
                                  viewBox="0 0 512 512"
                                  class="arrow"
                                >
                                  <path
                                    d="M233.4 406.6c12.5 12.5 32.8 12.5 45.3 0l192-192c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L256 338.7 86.6 169.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l192 192z"
                                  ></path>
                                </svg>
                              </div>
                              <div class="options">
                                <div title="all">
                                  <input id="all" name="paymentMonths" type="radio" checked="" />
                                  <label class="option" for="all" data-txt="غير محدد"></label>
                                </div>
                                <div title="option-1">
                                  <input id="option-1" name="paymentMonths" type="radio" />
                                  <label class="option" for="option-1" data-txt="شهر 1"></label>
                                </div>
                                <div title="option-2">
                                  <input id="option-2" name="paymentMonths" type="radio" />
                                  <label class="option" for="option-2" data-txt="شهرين 2"></label>
                                </div>
                                <div title="option-3">
                                  <input id="option-3" name="paymentMonths" type="radio" />
                                  <label class="option" for="option-3" data-txt="3 شهور"></label>
                                </div>
                                <div title="option-4">
                                  <input id="option-4" name="paymentMonths" type="radio" />
                                  <label class="option" for="option-4" data-txt="4 شهور"></label>
                                </div>
                                <div title="option-5">
                                  <input id="option-5" name="paymentMonths" type="radio" />
                                  <label class="option" for="option-5" data-txt="شهور 5"></label>
                                </div>
                                <div title="option-6">
                                  <input id="option-6" name="paymentMonths" type="radio" />
                                  <label class="option" for="option-6" data-txt="شهور 6"></label>
                                </div>
                                <div title="option-7">
                                  <input id="option-7" name="paymentMonths" type="radio" />
                                  <label class="option" for="option-7" data-txt="شهور 7"></label>
                                </div>
                                <div title="option-8">
                                  <input id="option-8" name="paymentMonths" type="radio" />
                                  <label class="option" for="option-8" data-txt="شهور 8"></label>
                                </div>
                                <div title="option-9">
                                  <input id="option-9" name="paymentMonths" type="radio" />
                                  <label class="option" for="option-9" data-txt="شهور 9"></label>
                                </div>
                                <div title="option-10">
                                  <input id="option-10" name="paymentMonths" type="radio" />
                                  <label class="option" for="option-10" data-txt="شهور 10"></label>
                                </div>
                                <div title="option-11">
                                  <input id="option-11" name="paymentMonths" type="radio" />
                                  <label class="option" for="option-11" data-txt="شهور 11"></label>
                                </div>
                                <div title="option-12">
                                  <input id="option-12" name="paymentMonths" type="radio" />
                                  <label class="option" for="option-12" data-txt="شهور 12"></label>
                                </div>
                              </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <h4><i class="fas fa-mony-plus"></i>  حالة الدفع </h4>
                            <!-- From Uiverse.io by andrew-demchenk0 --> 
                            <div class="wrapper">
                                <div class="card">
                                    <input class="input" type="radio" name="paymentStatus" value="unpaid" id="unpaid">
                                    <span class="check"></span>
                                    <label class="label" for="unpaid">
                                        <div class="title">لم يدفع</div>
                                    </label>
                                </div>
                                <div class="card">
                                    <input class="input" type="radio" name="paymentStatus" value="partial" id="partial">
                                    <span class="check"></span>
                                    <label class="label" for="partial">
                                        <div class="title">دفع جزئي</div>
                                    </label>
                                </div>
                                <div class="card">
                                    <input class="input" type="radio" name="paymentStatus" value="paid" id="paid" checked>
                                    <span class="check"></span>
                                    <label class="label" for="paid">
                                        <div class="title">دفع كامل</div>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <h5><i class="fas fa-mony-plus"></i>المبلغ الشهري </h5>
                            <div class="quantity-input-container">
                                <button type="button" id="decrement-button" class="quantity-btn decrement">
                                    <svg class="w-3 h-3" viewBox="0 0 18 2">
                                        <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M1 1h16"></path>
                                    </svg>
                                </button>
                                <input type="text" id="paymentAmount" class="quantity-input" placeholder="0.00" required>
                                <button type="button" id="increment-button" class="quantity-btn increment">
                                    <svg class="w-3 h-3" viewBox="0 0 18 18">
                                        <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 1v16M1 9h16"></path>
                                    </svg>
                                </button>
                            </div>
                            <p class="helper-text">أدخل المبلغ الشهري بالدينار</p>
                            <p class="info-text"><i class="fas fa-info-circle"></i>للعلم ان المبلغ الذي يجب ادخاله هو سعر الشهر الواحد لانه سيضرب في شهور الاشتراك ليعطي المجموع في الاسفل </p>
                        </div>
                    </div>
                    <div class="form-group">
                        <h6><i class="fas fa-mony-plus"></i> جنس الطلبة </h6>
                        <div class="gender-container">
                            <div class="gender-toggle-wrapper">
                                <input id="genderSwitch" class="gender-toggle" type="checkbox" hidden />
                                <label for="genderSwitch" class="switch">
                                    <span class="gender-option male">♂</span>
                                    <span class="gender-option female">♀</span>
                                </label>
                            </div>
                            <span class="gender-label">ذكر</span>
                        </div>
                    </div>
                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary" id="saveBtn">
                            <i class="fas fa-save"></i> حفظ
                        </button>
                        <button type="button" class="btn btn-secondary" id="cancelBtn" style="display: none;">
                            <i class="fas fa-times"></i> إلغاء
                        </button>
                    </div>
                </form>
            </section>

            <!-- Filters -->
            <section class="filters no-print">
                <h2><i class="fas fa-filter"></i> تصفية النتائج</h2>
                <div class="filter-controls">
                    <div class="search-box">
                        <i class="fas fa-search"></i>
                        <input type="text" id="searchInput" placeholder="ابحث بالاسم أو الصف...">
                    </div>
                    <div class="filter-group">
                        <label for="filterPaymentStatus">حالة الدفع:</label>
                        <select id="filterPaymentStatus">
                            <option value="all">الكل</option>
                            <option value="paid">مدفوع</option>
                            <option value="partial">دفع جزئي</option>
                            <option value="unpaid">غير مدفوع</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label for="filterPaymentType">نوع الدفع:</label>
                        <select id="filterPaymentType">
                            <option value="all">الكل</option>
                            <option value="شهري">شهري</option>
                            <option value="سنوي">سنوي</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label for="filterMonth">الشهر:</label>
                        <select id="filterMonth">
                            <option value="all">كل الشهور</option>
                            <option value="1">يناير</option>
                            <option value="2">فبراير</option>
                            <option value="3">مارس</option>
                            <option value="4">أبريل</option>
                            <option value="5">مايو</option>
                            <option value="6">يونيو</option>
                            <option value="7">يوليو</option>
                            <option value="8">أغسطس</option>
                            <option value="9">سبتمبر</option>
                            <option value="10">أكتوبر</option>
                            <option value="11">نوفمبر</option>
                            <option value="12">ديسمبر</option>
                        </select>
                    </div>
                    <button class="btn btn-secondary" id="resetFilters">
                        <i class="fas fa-redo"></i> إعادة تعيين
                    </button>
                    <button class="btn btn-print" id="printReport">
                        <i class="fas fa-print"></i> طباعة التقرير
                    </button>
                    <button class="btn btn-statistics" id="statisticsBtn">
                        <i class="fas fa-chart-line"></i> الإحصائيات
                    </button>
                    <button class="btn btn-danger" onclick="clearAllData()" style="background: linear-gradient(135deg, #dc3545 0%, #c82333 100%);">
                        <i class="fas fa-trash"></i> مسح البيانات
                    </button>
                    <button class="btn btn-success" onclick="exportData()" style="background: linear-gradient(135deg, #28a745 0%, #20c997 100%);">
                        <i class="fas fa-download"></i> تصدير البيانات
                    </button>
                </div>
            </section>

            <!-- Students Table -->
            <section class="students-table">
                <h2><i class="fas fa-list"></i> سجل الطلبة</h2>
                <div class="table-responsive">
                    <table>
                        <thead>
                            <tr>
                                <th>م</th>
                                <th>الاسم الكامل</th>
                                <th>الصف الدراسي</th>
                                <th>الجنس</th>
                                <th>تاريخ التسجيل</th>
                                <th>عدد شهور الدفع</th>
                                <th>المبلغ الشهري</th>
                                <th>المجموع الكلي</th>
                                <th>حالة الدفع</th>
                                <th>آخر تحديث</th>
                                <th class="no-print">الإجراءات</th>
                            </tr>
                        </thead>
                        <tbody id="studentsTableBody">
                            <!-- Students will be dynamically added here -->
                        </tbody>
                    </table>
                </div>
                <div class="no-results" id="noResults" style="display: none;">
                    <i class="fas fa-inbox"></i>
                    <p>لا توجد بيانات متاحة</p>
                </div>
            </section>
        </main>

        <!-- Footer -->
        <footer class="footer no-print">
            <p>جميع الحقوق محفوظة &copy; <span id="currentYear"></span> - نظام إدارة المدرسة</p>
        </footer>
    </div>

    <!-- Confirmation Modal -->
    <div class="modal" id="confirmationModal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <div class="modal-icon">
                <i class="fas fa-exclamation-triangle"></i>
            </div>
            <h3 id="modalTitle">تأكيد الحذف</h3>
            <p id="modalMessage">هل أنت متأكد من حذف هذا الطالب؟ لا يمكن التراجع عن هذه العملية.</p>
            <div class="modal-actions">
                <button class="btn btn-secondary" id="cancelModalBtn">إلغاء</button>
                <button class="btn btn-danger" id="confirmModalBtn">تأكيد الحذف</button>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div class="toast" id="toast"></div>

    <script src="app.js"></script>
</body>
</html>